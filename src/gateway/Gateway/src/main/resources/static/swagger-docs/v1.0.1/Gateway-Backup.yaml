---
openapi: 3.0.3
info:
  title: UHI-Gateway
  description: UHI(Unified Health Interface) is envisioned as an open protocol for various digital health services. UHI Network will be an open network of End User Applications (EUAs) and participating Health Service Provider (HSP) applications. UHI will enable a wide variety of digital health services between patients and health service providers (HSPs) including appointment booking, teleconsultation, service discovery and others.<br>
  
    <b>API Security</b><br>
    You need Authorization Token to consume APIs.
    <br><br><b>Gateway Signing</b>
    <br>The BG will send its signature in the Proxy-Authorization header in the exact same format as shown below - 
    <ul><li><p>X-Gateway-Authorization:Signature keyId="{subscriber_id}|{unique_key_id}|{algorithm}" algorithm="xed25519" created="1606970629" expires="1607030629" headers="(created) (expires) digest" signature="Base64(BLAKE-512(signing string))"</p></li></ul>
    
    <p>The EUAs and HSPAs subscriber is expected to send an Authorization header (as defined in RFC 7235, Section 4.1) where the “auth-scheme” is “Signature” and the “auth-param” parameters <br>
    Below is the format of a EUA/HSPA Authorization header in the typical HTTP Signature format - </p>
    
    <ul><li><p>Authorization:Signature keyId
     ="{subscriber_id}|{unique_key_id}|{algorithm}" 
     algorithm="xed25519" created="1606970629" expires="1607030629" headers="(created) (expires) digest" signature="Base64(BLAKE-512(signing string))"</p>
   <p>Follow this link for the verification process code -
    <a href ="https://github.com/NHA-ABDM/UHI/blob/Group-consultation/src/gateway/Discovery/src/main/java/in/gov/abdm/uhi/discovery/security/Crypt.java">Crypt</a></p></li></ul>
  
    <p><b>Hashing Algorithm</b><br>
    For computing the digest of the request body, the hashing function will use the BLAKE-512 hashing algorithm. BLAKE is a cryptographic hash function based on Dan Bernstein’s ChaCha stream cipher. For more documentation on the BLAKE-512 algorithm, please go to RFC7693.<br></p>

   <p><b>Signing Algorithm</b><br>
    To digitally sign the singing string, the subscribers should use the “XEdDSA” signature scheme (or “XEd25519”). For the first version of UHI gateway, we’ll be using the XEd25519 Signature Scheme.<br></p>
 

  termsOfService: termsOfServiceUrl
  contact:
    name: National Health Authority India
  license:
    name: License 1.0
    url: https://licenseUrl.com
  version: '1.0.0'
paths:
  /search:
    post:
      tags:
        - HSPA - Provider Platform
      description: Search for services by intent<br>
                   <b><i>First search coming from UHI gateway will include header(X-Gateway-Authorization)<br>
                   Second search will be a peer to peer connection and will not contain the header(X-Gateway-Authorization)</i></b>
      requestBody:
        description: EUA-Consumer Platform searches for healthcare
                     services/product<br>
                     <b>Parent category id is currently not supported in reference HSPA</b>
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    intent:
                      $ref: '#/components/schemas/Intent'
              required:
                - context
                - message
            examples:
            
              Search doctor by speciality(Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        type: Online
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                
                
              Search doctor by name and speciality (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        agent:
                          name: ganesh
                        type: Online
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation

              
              Search by Doctor and facility (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          agent:
                            name: ganesh
                          type: Online
                          item:
                            descriptor:
                              code: Consultation
                              name: Consultation

              Search by provider facility and specialty (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          type: Online
                          start:
                            time:
                              timestamp: '2022-07-15T00:00:00'
                          end:
                            time:
                              timestamp: '2022-07-16T00:00:00'
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation
              
                          
              Search by HPR Address (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      fulfillment:
                        agent:
                          id: ganeshborse@hpr.ndhm
                        start:
                          time:
                            timestamp: '2022-07-22T13:21:41'
                        end:
                          time:
                            timestamp: '2022-07-22T23:59:59'
                        type: Online
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation


                          
              Search by Doctor Name(Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        agent:
                          name: ganesh
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                        type: Online

                        
              Search doctor by speciality (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        type: Physical
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                
                
              Search doctor by name and speciality(PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        agent:
                          name: ganesh
                        type: Physical
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation

              
              Search by Doctor and facility (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          agent:
                            name: ganesh
                          type: Physical
                          item:
                            descriptor:
                              code: Consultation
                              name: Consultation

              Search by provider facility and specialty (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          type: Physical
                          start:
                            time:
                              timestamp: '2022-07-15T00:00:00'
                          end:
                            time:
                              timestamp: '2022-07-16T00:00:00'
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation
              
                          
              Search by HPR Address (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      fulfillment:
                        agent:
                          id: ganeshborse@hpr.ndhm
                        start:
                          time:
                            timestamp: '2022-07-22T13:21:41'
                        end:
                          time:
                            timestamp: '2022-07-22T23:59:59'
                        type: Physical
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation


                          
              Search by Doctor Name(PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        agent:
                          name: ganesh
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                        type: Physical

                
                          
              Search by City:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:011
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                
              Second search (HPR Address):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      provider:
                        id: '1'
                        categories:
                        - id: 0
                          parent_category_id: '1'
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        - id: '1'
                          descriptor:
                            code: ALLOPATHY
                            name: ALLOPATHY
                        fulfillment:
                          agent:
                            id: ganeshborse@hpr.ndhm
                          start:
                            time:
                              timestamp: '2022-07-22T13:21:41'
                          end:
                            time:
                              timestamp: '2022-07-22T23:59:59'
                          type: Online
                        item:
                          category_id: '0'
                          fulfillment_id: '1'
                          descriptor:
                            code: Consultation
                            name: Consultation

                
                                    
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /select:
    post:
      tags:
        - HSPA - Provider Platform
      description: Select items from the catalog and build your order <br>
                <b><i>*Currently not being used for doctor search will be used in vaccination search</i></b>
      requestBody:
        description: Selection of various products/services as part of order
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        provider:
                          type: object
                          properties:
                            id:
                              $ref: '#/components/schemas/Provider/properties/id'
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                              fulfillment_id:
                                $ref: '#/components/schemas/Fulfillment/properties/id'
                            required:
                              - id
                  required:
                    - order
              required:
                - context
                - message
            examples:
              Patient requests a quote for booking a consultation slot in a given doctor’s schedule:
                value:
                  context:
                    domain: nic2004:85110
                    country: IND
                    city: std:080
                    action: select
                    core_version: 0.7.1
                    message_id: 85a422c4-2867-4d72-b5f5-d31588e2f7c5
                    timestamp: '2021-03-23T10:00:40.065Z'
                  message:
                    order:
                      provider:
                        id: '1'
                      items:
                        - id: '1'
                          fulfillment_id: '2'

      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /init:
    post:
      tags:
        - HSPA - Provider Platform
      description: Initialize an order by providing billing and/or shipping details<br>
       <b><i> @abdm/gov.in/slot_id is very specific to reference HSPA app. For other integrators, please use fulfillment id.</i></b>
      requestBody:
        description: Initialization of the order once quote is agreed
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        provider:
                          type: object
                          properties:
                            id:
                              $ref: '#/components/schemas/Provider/properties/id'
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                              fulfillment_id:
                                $ref: '#/components/schemas/Fulfillment/properties/id'
                            required:
                              - id
                        billing:
                          $ref: '#/components/schemas/Billing'
                        fulfillment:
                          $ref: '#/components/schemas/Fulfillment'
                        quote:
                          $ref: '#/components/schemas/Quotation'  
                  required:
                    - order
              required:
                - context
                - message
            examples:
              Patient provides any additional billing and fulfillment details and finalizes booking:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: init
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://100.65.158.41:8901/api/v1/euaService
                    message_id: 559667a0-6576-11ed-83d2-db6676a4d91e
                    timestamp: '2022-11-20T06:17:34.858358Z'
                    provider_uri: https://hspasbx.abdm.gov.in/api/v1
                    transaction_id: 559667a0-6576-11ed-83d2-db6676a4d91e
                  message:
                    order:
                      provider:
                        id: '1'
                      item:
                        id: '0'
                        descriptor:
                          code: Consultation
                          name: Consultation
                        price:
                          currency: INR
                          value: '500.0'
                      fulfillment:
                        id: 4fb27b0d-5dfa-4854-9f46-1cd85be0d98e
                        type: Online
                        agent:
                          id: satish123@hpr.ndhm
                          name: Satish Udhavrao Chonde
                          gender: M
                          tags:
                            "@abdm/gov/in/education": MBBS
                            "@abdm/gov/in/experience": '10.0'
                            "@abdm/gov/in/languages": Hindi, Marathi, English
                            "@abdm/gov/in/hpr_id": 71-4453-8853-6840
                            "@abdm/gov.in/groupConsultation": 'false'
                            "@abdm/gov.in/consumerUrl": https://uhieuasandbox.abdm.gov.in/api/v1/bookingService/
                        start:
                          time:
                            timestamp: '2022-11-16T12:00:00'
                        end:
                          time:
                            timestamp: '2022-11-16T12:30:00'
                      billing:
                        name: Satish Udhavrao Chonde
                        address:
                          door: ''
                          name: Satish Udhavrao Chonde
                          locality: C/O Udhavrao Chonde At abhinav nagar kandhar po kandhar tq kandhar
                            Kandhar
                          city: Nanded
                          state: Maharashtra
                          country: INDIA
                        phone: '9511225358'
                      customer:
                        id: ''
                        person:
                          gender: M
                          dob: '2022-11-21'
                          dayOfBirth: 21
                          monthOfBirth: 11
                          yearOfBirth: 2022
                        cred: satishc661994@sbx


      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /confirm:
    post:
      tags:
        - HSPA - Provider Platform
      description: Confirms the order by agreeing to the fullfillment terms
      requestBody:
        description: Confirmation of the order once fulfillment terms are agreed <br>
          <b><i> "@abdm/gov.in/patient_key" is specifically used for encryption of messages between doctor and patient in reference HSPA and EUA apps. For other integrators, its not mandatory.</i></b>
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        provider:
                          type: object
                          properties:
                            id:
                              $ref: '#/components/schemas/Provider/properties/id'
                        state:
                          $ref: '#/components/schemas/State'  
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                              fulfillment_id:
                                $ref: '#/components/schemas/Fulfillment/properties/id'
                            required:
                              - id
                        billing:
                          $ref: '#/components/schemas/Billing'
                        fulfillment:
                          $ref: '#/components/schemas/Fulfillment'
                  required:
                    - order
              required:
                - context
                - message
                
            examples:    
              Confirm request for the order:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: confirm
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://100.65.158.41:8901/api/v1/euaService
                    message_id: 27d06780-59dc-11ed-b4f7-1714b7644c84
                    timestamp: '2022-11-05T12:05:27'
                    provider_id: hspa-nha
                    provider_uri: https://hspasbx.abdm.gov.in/api/v1
                    transaction_id: 27d06780-59dc-11ed-b4f7-1714b7644c84
                  message:
                    order:
                      id: 8441-696786-1042
                      item:
                        id: '0'
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        id: 1479e965-52d0-4b19-8615-dde81e45432a
                        type: Online
                        agent:
                          id: ganeshborse@hpr.ndhm
                          name: Ganesh Vikram Borse
                          gender: M
                          tags:
                            "@abdm/gov/in/education": MBBS
                            "@abdm/gov/in/experience": '5.0'
                            "@abdm/gov/in/languages": Eng, Hin
                            "@abdm/gov/in/hpr_id": 73-5232-1888-8686
                            "@abdm/gov.in/groupConsultation": 'false'
                            "@abdm/gov.in/consumerUrl": https://uhieuasandbox.abdm.gov.in/api/v1/bookingService/
                        start:
                          time:
                            timestamp: '2022-11-01T18:30:00'
                        end:
                          time:
                            timestamp: '2022-11-01T19:00:00'
                        tags:
                          "@abdm/gov.in/slot_id": 1479e965-52d0-4b19-8615-dde81e45432a
                          "@abdm/gov.in/patient_key": "[159, 248, 220, 195, 187, 221, 217, 26, 236,
                            136, 151, 89, 126, 130, 238, 52, 205, 85, 227, 64, 252, 213, 209, 207, 56,
                            212, 244, 15, 210, 7, 188, 14]"
                      billing:
                        name: Vishal Umakant Swami
                        address:
                          door: ''
                          name: C/O Umakant Swami someshwar nagar Parli
                          locality: ''
                          state: Maharashtra
                          country: INDIA
                          area_code: '431515'
                        email: vswami241@gmail.com
                        phone: '7721043046'
                      quote:
                        price:
                          currency: INR
                          value: '300.0'
                        breakup:
                        - title: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                        - title: CGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: SGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: Registration
                          price:
                            currency: INR
                            value: '0'
                      payment:
                        uri: https://api.bpp.com/pay?amt=1500&txn_id=ksh87yriuro34iyr3p4&mode=upi&vpa=sana.bhatt@upi
                        tl_method: http/get
                        params:
                          amount: '300.0'
                          mode: UPI
                          vpa: ganeshvborse@icici
                          transaction_id: ''
                        type: ON-ORDER
                        status: PAID
                      customer:
                        id: ''
                        person:
                          gender: M
                          dob: '2022-11-21'
                          dayOfBirth: 21
                          monthOfBirth: 11
                          yearOfBirth: 2022
                        cred: satishc661994@sbx
                      provider:
                        id: '1'

      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
     
  /message:
    post:
      tags:
        - HSPA - Provider Platform
      description: Inter-operable communication API between consumer and provider<br><b><i>(For more information regarding WEBRTC refer to message/on_message doc )</i></b>
      requestBody:
        description: Describes the contents of the message
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      $ref: '#/components/schemas/Order'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              Message for text:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Manish Pravin Kahane
                            gender: M
                            image: "image hashed base64"
                            cred: manishkahane1992@sbx
                        receiver:
                          person:
                            name: Santosh Ramchandra Jagtap
                            gender: M
                            image: image
                            cred: santoshjagtap@hpr.ndhm
                        content:
                          content_id: e616e100-42e0-11ed-b5d7-51ae9d37b46f
                          content_value: '{"cipher_text":[23,162,74,105,185,88],"nonce":[33,29,210,14,186,57,229,151,121,96,44,214,50,233,226,163],"mac_bytes":[85,184,213,254,106,150,18,26,131,9,118,68,24,161,13,173,105,21,168,102,61,81,254,74,229,82,57,233,86,79,111,184]}'
                          content_type: text
                        time:
                          timestamp: '2022-10-03T11:32:01'

                        
              Message for media:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Akshay Dadaji Dhondge
                            gender: M
                            image: "image hashed base64"
                            cred: akshaydhondge@sbx
                        receiver:
                          person:
                            name: Ganesh Vikram Borse
                            gender: M
                            image: image
                            cred: ganeshborse@hpr.ndhm
                        content:
                          content_id: 52216af0-42e1-11ed-a4b6-873d4ad3e26c
                          content_value: '{"type":"CANDIDATE","data":{"to":"ganeshborse@hpr.ndhm","from":"","candidate":{"sdpMLineIndex":0,"sdpMid":"0","candidate":"candidate:1355446498
                            1 udp 25108223 216.39.253.10 40045 typ relay raddr 103.177.129.21 rport
                            56294 generation 0 ufrag rlf3 network-id 1 network-cost 10"},"session_id":"ganeshborse@hpr.ndhm-akshaydhondge@sbx"}}'
                          content_type: media
                        time:
                          timestamp: '2022-10-03T11:35:03'

                        
              Message for video call signalling:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Akshay Dadaji Dhondge
                            gender: M
                            image: "Image hashed base64"
                            cred: akshaydhondge@sbx
                        receiver:
                          person:
                            name: Ganesh Vikram Borse
                            gender: M
                            image: image
                            cred: ganeshborse@hpr.ndhm
                        content:
                          content_id: 52216af0-42e1-11ed-a4b6-873d4ad3e26c
                          content_value: '{"type":"CANDIDATE","data":{"to":"ganeshborse@hpr.ndhm","from":"","candidate":{"sdpMLineIndex":0,"sdpMid":"0","candidate":"candidate:1355446498
                            1 udp 25108223 216.39.253.10 40045 typ relay raddr 103.177.129.21 rport
                            56294 generation 0 ufrag rlf3 network-id 1 network-cost 10"},"session_id":"ganeshborse@hpr.ndhm-akshaydhondge@sbx"}}'
                          content_type: video_call_signalling
                        time:
                          timestamp: '2022-10-03T11:35:03'

  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
                  
                  
  /cancel:
    post:
      tags:
        - HSPA - Provider Platform
      description: Sends the cancellation request to other party. 
      requestBody:
        description: Describes the contents of the message
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      $ref: '#/components/schemas/Order'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              Cancel for patient cancelling appointment:
                value:
                  context:
                    domain: 'nic2004:85111'
                    country: IND
                    city: 'std:080'
                    action: cancel
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: 'http://uhieuasandbox.abdm.gov.in/api/v1/euaService'
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: 'http://hspasbx.abdm.gov.in/api/v1'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    order:
                      id: 8441-696786-1042
                      state: CANCELLED
                      fulfillment:
                        tags:
                          '@abdm/gov.in/cancelledby': patient


                        
              Cancel for doctor cancelling appointment:
                value:
                  context:
                    domain: 'nic2004:85111'
                    country: IND
                    city: 'std:080'
                    action: cancel
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: 'http://uhieuasandbox.abdm.gov.in/api/v1/euaService'
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: 'http://hspasbx.abdm.gov.in/api/v1'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    order:
                      id: 8441-696786-1042
                      state: CANCELLED
                      fulfillment:
                        tags:
                          '@abdm/gov.in/cancelledby': doctor

  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message                
                  
  "/api/v1/search":
    post:
      tags:
      - UHI - Gateway
      summary: Search requestor to broadcast the message over HSPAs
      description: Search for services by intent
                   
      operationId: searchUsingPOST
      parameters:
      - name: headers
        in: header
        description: headers
        required: true
        schema:
          type: string
      requestBody:
        description: EUA-Consumer Platform searches for healthcare
                     services/product<br>
                     <b>Parent category id is currently not supported in reference HSPA</b>
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    intent:
                      $ref: '#/components/schemas/Intent'
              required:
                - context
                - message
            examples:
              Search doctor by speciality(Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        type: Online
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                
                
              Search doctor by name and speciality (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        agent:
                          name: ganesh
                        type: Online
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation

              
              Search by Doctor and facility (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          agent:
                            name: ganesh
                          type: Online
                          item:
                            descriptor:
                              code: Consultation
                              name: Consultation

              Search by provider facility and specialty (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          type: Online
                          start:
                            time:
                              timestamp: '2022-07-15T00:00:00'
                          end:
                            time:
                              timestamp: '2022-07-16T00:00:00'
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation
              
                          
              Search by HPR Address (Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      fulfillment:
                        agent:
                          id: ganeshborse@hpr.ndhm
                        start:
                          time:
                            timestamp: '2022-07-22T13:21:41'
                        end:
                          time:
                            timestamp: '2022-07-22T23:59:59'
                        type: Online
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation


                          
              Search by Doctor Name(Teleconsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        agent:
                          name: ganesh
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                        type: Online

                        
              Search doctor by speciality (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        type: Physical
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                
                
              Search doctor by name and speciality(PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      category:
                        descriptor:
                          code: CARDIOLOGY
                          name: CARDIOLOGY
                      fulfillment:
                        agent:
                          name: ganesh
                        type: Physical
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation

              
              Search by Doctor and facility (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          agent:
                            name: ganesh
                          type: Physical
                          item:
                            descriptor:
                              code: Consultation
                              name: Consultation

              Search by provider facility and specialty (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      provider:
                        descriptor:
                          name: Test Hospital
                        category:
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        fulfillment:
                          type: Physical
                          start:
                            time:
                              timestamp: '2022-07-15T00:00:00'
                          end:
                            time:
                              timestamp: '2022-07-16T00:00:00'
                        item:
                          descriptor:
                            code: Consultation
                            name: Consultation
              
                          
              Search by HPR Address (PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      fulfillment:
                        agent:
                          id: ganeshborse@hpr.ndhm
                        start:
                          time:
                            timestamp: '2022-07-22T13:21:41'
                        end:
                          time:
                            timestamp: '2022-07-22T23:59:59'
                        type: Physical
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation


                          
              Search by Doctor Name(PhysicalConsultation):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      item:
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        agent:
                          name: ganesh
                        start:
                          time:
                            timestamp: '2022-07-15T00:00:00'
                        end:
                          time:
                            timestamp: '2022-07-16T00:00:00'
                        type: Physical

                
                          
              Search by City:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:011
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                
              Second search (HPR Address):
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: search
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                    timestamp: '2022-11-14T07:20:54.005277Z'
                    transaction_id: dfa04e10-63ec-11ed-9f98-49dd5c7c4d8a
                  message:
                    intent:
                      provider:
                        id: '1'
                        categories:
                        - id: 0
                          parent_category_id: '1'
                          descriptor:
                            code: CARDIOLOGY
                            name: CARDIOLOGY
                        - id: '1'
                          descriptor:
                            code: ALLOPATHY
                            name: ALLOPATHY
                        fulfillment:
                          agent:
                            id: ganeshborse@hpr.ndhm
                          start:
                            time:
                              timestamp: '2022-07-22T13:21:41'
                          end:
                            time:
                              timestamp: '2022-07-22T23:59:59'
                          type: Online
                        item:
                          category_id: '0'
                          fulfillment_id: '1'
                          descriptor:
                            code: Consultation
                            name: Consultation
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/Response"
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
  "/api/v1/on_search":
    post:
      tags:
      - UHI - Gateway
      summary: Accepter for all the on_search response from the HSPAs
      operationId: searchUsingPOST_1
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    catalog:
                      $ref: '#/components/schemas/Catalog'
                  required:
                    - catalog
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
                
            examples:
               Catalog of Doctors with their Fulfillment details (1st on_search):
                 value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_search
                    timestamp: '2022-07-05T15:24:35'
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    provider_id: hspa-nha
                    provider_uri: https://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    catalog:
                      descriptor:
                        name: Ref HSPA
                        short_desc: Short description of provider
                        long_desc: Long description of provider
                        images: uri:http://path/to/image
                      providers:
                      - id: '1'
                        descriptor:
                          name: Test Hospital
                          images: uri:http://path/to/image
                          short_desc: Short description of Hospital
                          long_desc: Long description of Hospital
                        categories:
                        - id: '0'
                          descriptor:
                            code: ALLOPATHY
                            name: Allopathy
                        - id: '1'
                          parent_category_id: '0'
                          descriptor:
                            code: CARDIOLOGY
                            name: Cardiology
                        fulfillments:
                        - id: '0'
                          type: Physical
                          agent:
                            id: ganeshborse@hpr.ndhm
                            name: " Ganesh Vikram Borse"
                            gender: M
                            tags:
                              "@abdm/gov/in/experience": '5.0'
                              "@abdm/gov/in/languages": Eng, Hin
                              "@abdm/gov/in/education": MBBS
                              "@abdm/gov/in/hpr_id": 73-5232-1888-8686
                        - id: '1'
                          type: Physical
                          agent:
                            id: amodborse@hpr.ndhm
                            name: " Amod Borse"
                            gender: M
                            tags:
                              "@abdm/gov/in/experience": '5.0'
                              "@abdm/gov/in/languages": Eng, Hin
                              "@abdm/gov/in/education": MBBS
                              "@abdm/gov/in/hpr_id": 73-5247-1888-8686
                        items:
                        - id: '0'
                          descriptor:
                            code: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                          category_id: '0'
                          fulfillment_id: '0'
                        - id: '1'
                          descriptor:
                            code: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                          category_id: '0'
                          fulfillment_id: '1'
                        location:
                          id: '1'
                          descriptor:
                            name: Test Hospital
                          city:
                            name: Delhi
                            code: std:011
                          country:
                            name: INDIA
                            code: "+91"
                          gps: 18.5246036,73.792927
                          address: 3rd, 7th & 9th Floor, Tower-L, Jeevan Bharati Building, Connaught
                            Place, New Delhi, Delhi 110001
 
              
              
               Catalog of Doctors with their availability details (2nd on_search):
                    value:
                      context:
                        domain: nic2004:85111
                        country: IND
                        city: std:080
                        action: on_search
                        timestamp: '2022-11-19T18:32:26.733212Z'
                        core_version: 0.7.1
                        consumer_id: eua-nha
                        consumer_uri: https://uhieuasandbox.abdm.gov.in/api/v1/euaService
                        provider_id: hspa-nha
                        provider_uri: https://hspasbx.abdm.gov.in/api/v1
                        transaction_id: d64280e0-6513-11ed-a460-89d2a5ca270b
                        message_id: d64280e0-6513-11ed-a460-89d2a5ca270b
                      message:
                        catalog:
                          descriptor:
                            name: Ref HSPA
                            short_desc: Short description of provider
                            long_desc: Long description of provider
                            images: uri:http://path/to/image
                          provider:
                            id: '1'
                            descriptor:
                              name: Test Hospital
                              images: uri:http://path/to/image
                              short_desc: Short description of Hospital
                              long_desc: Long description of Hospital
                            categories:
                            - id: '0'
                              descriptor:
                                code: ALLOPATHY
                                name: Allopathy
                            - id: '1'
                              parent_category_id: '0'
                              descriptor:
                                code: CARDIOLOGY
                                name: Cardiology
                            items:
                            - id: '0'
                              descriptor:
                                code: Consultation
                                name: Consultation
                              category_id: '1'
                              fulfillment_id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              price:
                                currency: INR
                                value: 300
                            - id: '1'
                              descriptor:
                                code: Consultation
                                name: Consultation
                              category_id: '1'
                              fulfillment_id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              price:
                                currency: INR
                                value: 300
                            fulfillments:
                            - id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              type: Online
                              agent:
                                id: ganeshborse@hpr.ndhm
                                name: Ganesh Vikram Borse
                                gender: M
                              start:
                                time:
                                  timestamp: '2022-11-16T02:00:00'
                              end:
                                time:
                                  timestamp: '2022-11-16T02:30:00'
                            location:
                              id: '1'
                              descriptor:
                                name: Test Hospital
                              city:
                                name: Delhi
                                code: std:011
                              country:
                                name: INDIA
                                code: "+91"
                              gps: 18.5246036,73.792927
                              address: 3rd, 7th & 9th Floor, Tower-L, Jeevan Bharati Building, Connaught
                                Place, New Delhi, Delhi 110001
  
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/Response"
        '201':
          description: Created
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
  /on_search:
    post:
      tags:
        - EUA - Consumer Platform
      description: Send catalog
      requestBody:
        description: Sends catalog of healtchare services & products as a response to /search
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    catalog:
                      $ref: '#/components/schemas/Catalog'
                  required:
                    - catalog
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
               Catalog of Doctors with their Fulfillment details (1st on_search):
                 value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_search
                    timestamp: '2022-07-05T15:24:35'
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    provider_id: hspa-nha
                    provider_uri: https://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    catalog:
                      descriptor:
                        name: Ref HSPA
                        short_desc: Short description of provider
                        long_desc: Long description of provider
                        images: uri:http://path/to/image
                      providers:
                      - id: '1'
                        descriptor:
                          name: Test Hospital
                          images: uri:http://path/to/image
                          short_desc: Short description of Hospital
                          long_desc: Long description of Hospital
                        categories:
                        - id: '0'
                          descriptor:
                            code: ALLOPATHY
                            name: Allopathy
                        - id: '1'
                          parent_category_id: '0'
                          descriptor:
                            code: CARDIOLOGY
                            name: Cardiology
                        fulfillments:
                        - id: '0'
                          type: Physical
                          agent:
                            id: ganeshborse@hpr.ndhm
                            name: " Ganesh Vikram Borse"
                            gender: M
                            tags:
                              "@abdm/gov/in/experience": '5.0'
                              "@abdm/gov/in/languages": Eng, Hin
                              "@abdm/gov/in/education": MBBS
                              "@abdm/gov/in/hpr_id": 73-5232-1888-8686
                        - id: '1'
                          type: Physical
                          agent:
                            id: amodborse@hpr.ndhm
                            name: " Amod Borse"
                            gender: M
                            tags:
                              "@abdm/gov/in/experience": '5.0'
                              "@abdm/gov/in/languages": Eng, Hin
                              "@abdm/gov/in/education": MBBS
                              "@abdm/gov/in/hpr_id": 73-5247-1888-8686
                        items:
                        - id: '0'
                          descriptor:
                            code: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                          category_id: '0'
                          fulfillment_id: '0'
                        - id: '1'
                          descriptor:
                            code: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                          category_id: '0'
                          fulfillment_id: '1'
                        location:
                          id: '1'
                          descriptor:
                            name: Test Hospital
                          city:
                            name: Delhi
                            code: std:011
                          country:
                            name: INDIA
                            code: "+91"
                          gps: 18.5246036,73.792927
                          address: 3rd, 7th & 9th Floor, Tower-L, Jeevan Bharati Building, Connaught
                            Place, New Delhi, Delhi 110001
 
              
              
               Catalog of Doctors with their availability details (2nd on_search):
                    value:
                      context:
                        domain: nic2004:85111
                        country: IND
                        city: std:080
                        action: on_search
                        timestamp: '2022-11-19T18:32:26.733212Z'
                        core_version: 0.7.1
                        consumer_id: eua-nha
                        consumer_uri: https://uhieuasandbox.abdm.gov.in/api/v1/euaService
                        provider_id: hspa-nha
                        provider_uri: https://hspasbx.abdm.gov.in/api/v1
                        transaction_id: d64280e0-6513-11ed-a460-89d2a5ca270b
                        message_id: d64280e0-6513-11ed-a460-89d2a5ca270b
                      message:
                        catalog:
                          descriptor:
                            name: Ref HSPA
                            short_desc: Short description of provider
                            long_desc: Long description of provider
                            images: uri:http://path/to/image
                          provider:
                            id: '1'
                            descriptor:
                              name: Test Hospital
                              images: uri:http://path/to/image
                              short_desc: Short description of Hospital
                              long_desc: Long description of Hospital
                            categories:
                            - id: '0'
                              descriptor:
                                code: ALLOPATHY
                                name: Allopathy
                            - id: '1'
                              parent_category_id: '0'
                              descriptor:
                                code: CARDIOLOGY
                                name: Cardiology
                            items:
                            - id: '0'
                              descriptor:
                                code: Consultation
                                name: Consultation
                              category_id: '1'
                              fulfillment_id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              price:
                                currency: INR
                                value: 300
                            - id: '1'
                              descriptor:
                                code: Consultation
                                name: Consultation
                              category_id: '1'
                              fulfillment_id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              price:
                                currency: INR
                                value: 300
                            fulfillments:
                            - id: bf5175b6-5fc9-46d1-b449-a4239099fca6
                              type: Online
                              agent:
                                id: ganeshborse@hpr.ndhm
                                name: Ganesh Vikram Borse
                                gender: M
                              start:
                                time:
                                  timestamp: '2022-11-16T02:00:00'
                              end:
                                time:
                                  timestamp: '2022-11-16T02:30:00'
                            location:
                              id: '1'
                              descriptor:
                                name: Test Hospital
                              city:
                                name: Delhi
                                code: std:011
                              country:
                                name: INDIA
                                code: "+91"
                              gps: 18.5246036,73.792927
                              address: 3rd, 7th & 9th Floor, Tower-L, Jeevan Bharati Building, Connaught
                                Place, New Delhi, Delhi 110001
                  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - context
  /on_select:
    post:
      tags:
        - EUA - Consumer Platform
      description: Send draft order object with quoted price for selected items<br>
                <b><i>*Currently not being used for doctor search will be used in vaccination search</i></b>
      requestBody:
        description: Draft order object with price quotation
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        provider:
                          $ref: '#/components/schemas/Provider'
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                              fulfillment_id:
                                $ref: '#/components/schemas/Fulfillment/properties/id'
                            required:
                              - id
                        quote:
                          $ref: '#/components/schemas/Quotation'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              Patient receives a quote for booking a consultation slot in a given doctor’s schedule:
                value:
                  context:
                    domain: nic2004:85110
                    country: IND
                    city: std:080
                    action: select
                    core_version: 0.7.1
                    message_id: 85a422c4-2867-4d72-b5f5-d31588e2f7c5
                    timestamp: '2021-03-23T10:00:40.065Z'
                  message:
                    order:
                      provider:
                        id: '1'
                        descriptor:
                          name: MAX Hospitals
                      items:
                        - id: '1'
                          descriptor:
                            name: Consultation
                          fulfillment_id: '2'
                          provider_id: '1'
                      fulfillment:
                        id: '2'
                        type: DIGITAL-OPD
                        person:
                          id: '1'
                          name: Dr Asthana
                          gender: male
                          image: https://image/of/doctor.png
                          cred: uhiId:237402938409485039850935
                        time:
                          range:
                            start: T10:15Z
                            end: T10:30Z
                      quote:
                        price:
                          currency: INR
                          value: '110'
                          breakup:
                            - ./dhp-0_7_1.consultation: '100'
                            - ./dhp-0_7_1.cgst: '5'
                            - ./dhp-0_7_1.sgst: '5'
                    
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /on_init:
    post:
      tags:
        - EUA - Consumer Platform
      description: Send order object with payment details updated
      requestBody:
        description: TODO
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        id:
                          $ref: '#/components/schemas/Order/properties/id'
                        provider:
                          type: object
                          properties:
                            id:
                              $ref: '#/components/schemas/Provider/properties/id'
                        state:
                          $ref: '#/components/schemas/State'  
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                        billing:
                          $ref: '#/components/schemas/Billing'
                        fulfillment:
                          $ref: '#/components/schemas/Fulfillment'
                        quote:
                          $ref: '#/components/schemas/Quotation'
                        payment:
                          $ref: '#/components/schemas/Payment'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              HSPA Platform generates a booking and sends terms that require settlement to a bank account:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_init
                    timestamp: '2022-11-20T06:17:34.858358Z'
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: https://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    provider_id: hspa-nha
                    provider_uri: https://hspasbx.abdm.gov.in/api/v1
                    transaction_id: 559667a0-6576-11ed-83d2-db6676a4d91e
                    message_id: 559667a0-6576-11ed-83d2-db6676a4d91e
                  message:
                    order:
                      id: 1730-386853-6695
                      provider:
                        id: '1'
                      item:
                        id: '0'
                        descriptor:
                          code: Consultation
                          name: Consultation
                        price:
                          currency: INR
                          value: '500.0'
                      fulfillment:
                        id: 4fb27b0d-5dfa-4854-9f46-1cd85be0d98e
                        type: Online
                        agent:
                          id: satish123@hpr.ndhm
                          name: Satish Udhavrao Chonde
                          gender: M
                          tags:
                            "@abdm/gov/in/education": MBBS
                            "@abdm/gov/in/experience": '10.0'
                            "@abdm/gov/in/languages": Hindi, Marathi, English
                            "@abdm/gov/in/hpr_id": 71-4453-8853-6840
                            "@abdm/gov.in/groupConsultation": 'false'
                            "@abdm/gov.in/consumerUrl": https://uhieuasandbox.abdm.gov.in/api/v1/bookingService/
                        start:
                          time:
                            timestamp: '2022-11-16T12:00:00'
                        end:
                          time:
                            timestamp: '2022-11-16T12:30:00'
                      billing:
                        name: Satish Udhavrao Chonde
                        address:
                          door: ''
                          name: Satish Udhavrao Chonde
                          locality: C/O Udhavrao Chonde At abhinav nagar kandhar po kandhar tq kandhar
                            Kandhar
                          city: Nanded
                          state: Maharashtra
                          country: INDIA
                        phone: '9511225358'
                      quote:
                        price:
                          currency: INR
                          value: '300.0'
                        breakup:
                        - title: Consultation
                          price:
                            currency: INR
                            value: '300.0'
                        - title: CGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: SGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: Registration
                          price:
                            currency: INR
                            value: '0'
                      customer:
                        id: ''
                        person:
                          gender: M
                          dob: '2022-11-21'
                          dayOfBirth: 21
                          monthOfBirth: 11
                          yearOfBirth: 2022
                        cred: satishc661994@sbx
                      payment:
                        uri: https://api.bpp.com/pay?amt=100&txn_id=ksh87yriuro34iyr3p4&mode=upi&vpa=doctor@upi
                        type: ON-ORDER
                        status: NOT-PAID

                      

                  

      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
  /on_confirm:
    post:
      tags:
        - EUA - Consumer Platform
      description: Send active order object
      requestBody:
        description: <b><i> "@abdm/gov.in/patient_key" <br> "@abdm/gov.in/doctors_key" <br> Are specifically used for encryption of messages between doctor and patient in reference HSPA and EUA apps. For other integrators, its not mandatory.</i></b>
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      type: object
                      properties:
                        id:
                          $ref: '#/components/schemas/Order/properties/id'
                        provider:
                          type: object
                          properties:
                            id:
                              $ref: '#/components/schemas/Provider/properties/id'
                        state:
                          $ref: '#/components/schemas/State'  
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                $ref: '#/components/schemas/Item/properties/id'
                              quantity:
                                $ref: '#/components/schemas/ItemQuantity/properties/selected'
                        billing:
                          $ref: '#/components/schemas/Billing'
                        fulfillment:
                          $ref: '#/components/schemas/Fulfillment'
                        quote:
                          $ref: '#/components/schemas/Quotation'
                        payment:
                          $ref: '#/components/schemas/Payment'

                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              HSPA Platform agrees to fulfill the order and sends latest state of the booking:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_confirm
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35.481906'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    order:
                      id: 8441-696786-1042
                      state: CONFIRMED
                      item:
                        id: '1'
                        descriptor:
                          code: Consultation
                          name: Consultation
                      fulfillment:
                        id: d680dd36-1d0d-43c6-96c4-dec0f06008ea
                        type: Online
                        agent:
                          id: ganeshborse@hpr.ndhm
                          name: Ganesh Vikram Borse
                          gender: F
                          tags:
                            "@abdm/gov/in/education": MBBS,MS
                            "@abdm/gov/in/experience": '15.0'
                            "@abdm/gov/in/languages": English, Hindi, Marathi
                            "@abdm/gov/in/hpr_id": 71-0623-3144-1604
                        start:
                          time:
                            timestamp: '2022-09-15T15:00:00'
                        end:
                          time:
                            timestamp: '2022-09-15T15:15:00'
                        tags:
                          "@abdm/gov.in/slot_id": d680dd36-1d0d-43c6-96c4-dec0f06008ea
                          "@abdm/gov.in/patient_key": "[81, 143, 20, 22, 24, 229, 2, 145, 126, 175,
                            70, 249, 127, 232, 28, 200, 47, 11, 206, 45, 251, 212, 106, 210, 52, 31,
                            110, 173, 137, 16, 156, 12]"
                          "@abdm/gov.in/doctors_key": "[73, 52, 18, 69, 97, 198, 26, 138, 217, 154,
                            50, 28, 111, 252, 155, 188, 192, 62, 49, 207, 101, 199, 237, 198, 95, 11,
                            249, 140, 238, 81, 246, 111]"
                      billing:
                        name: Manish Pravin Kahane
                        address:
                          door: ''
                          name: " Flat no. 702, C Wing, The One Society Siddhivinayak Vihar Bhugaon,
                            bavdhan Pirangut"
                          locality: ''
                          city: Pune
                          state: Maharashtra
                          country: INDIA
                          area_code: '412115'
                        email: manishkahane12@gmail.com
                        phone: '9730498995'
                      quote:
                        price:
                          currency: INR
                          value: '1000'
                        breakup:
                        - title: Consultation
                          price:
                            currency: INR
                            value: '1000'
                        - title: CGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: SGST @ 5%
                          price:
                            currency: INR
                            value: '0'
                        - title: Registration
                          price:
                            currency: INR
                            value: '0'
                      customer:
                        id: ''
                        person:
                          gender: M
                          dob: '2022-11-21'
                          dayOfBirth: 21
                          monthOfBirth: 11
                          yearOfBirth: 2022
                        cred: satishc661994@sbx
                      payment:
                        uri: https://api.bpp.com/pay?amt=1500&txn_id=ksh87yriuro34iyr3p4&mode=upi&vpa=sana.bhatt@upi
                        type: ON-ORDER
                        status: PAID
                        tl_method: http/get
                        params:
                          transaction_id: ''
                          amount: '1000'
                          mode: UPI
                          vpa: xyz@ghh
                      provider:
                        id: '1'


                  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message

  /on_message:
    post:
      tags:
        - EUA - Consumer Platform
      description: Inter-operable communication API between consumer and provider <br><b><i>(For more information regarding WEBRTC refer to message/on_message doc )</i></b>
      requestBody:
        description: Describes the contents of the message
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      $ref: '#/components/schemas/Order'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              On_message for text:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35.481906Z'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Manish Pravin Kahane
                            gender: M
                            image: "image hashed base64"
                            cred: manishkahane1992@sbx
                        receiver:
                          person:
                            name: Santosh Ramchandra Jagtap
                            gender: M
                            image: image
                            cred: santoshjagtap@hpr.ndhm
                        content:
                          content_id: e616e100-42e0-11ed-b5d7-51ae9d37b46f
                          content_value: '{"cipher_text":[23,162,74,105,185,88],"nonce":[33,29,210,14,186,57,229,151,121,96,44,214,50,233,226,163],"mac_bytes":[85,184,213,254,106,150,18,26,131,9,118,68,24,161,13,173,105,21,168,102,61,81,254,74,229,82,57,233,86,79,111,184]}'
                          content_type: text
                        time:
                          timestamp: '2022-10-03T11:32:01'

                        
              On_message for media:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35.481906Z'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Akshay Dadaji Dhondge
                            gender: M
                            image: "image hashed base64"
                            cred: akshaydhondge@sbx
                        receiver:
                          person:
                            name: Ganesh Vikram Borse
                            gender: M
                            image: image
                            cred: ganeshborse@hpr.ndhm
                        content:
                          content_id: 52216af0-42e1-11ed-a4b6-873d4ad3e26c
                          content_value: '{"type":"CANDIDATE","data":{"to":"ganeshborse@hpr.ndhm","from":"","candidate":{"sdpMLineIndex":0,"sdpMid":"0","candidate":"candidate:1355446498
                            1 udp 25108223 216.39.253.10 40045 typ relay raddr 103.177.129.21 rport
                            56294 generation 0 ufrag rlf3 network-id 1 network-cost 10"},"session_id":"ganeshborse@hpr.ndhm-akshaydhondge@sbx"}}'
                          content_type: media
                        time:
                          timestamp: '2022-10-03T11:35:03'

                        
              On_message for video call signalling:
                value:
                  context:
                    domain: nic2004:85111
                    country: IND
                    city: std:080
                    action: on_message
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: http://uhieuasandbox.abdm.gov.in/api/v1/euaService
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35.481906Z'
                    provider_id: hspa-nha
                    provider_uri: http://hspasbx.abdm.gov.in/api/v1
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    intent:
                      chat:
                        sender:
                          person:
                            name: Akshay Dadaji Dhondge
                            gender: M
                            image: "Image hashed base64"
                            cred: akshaydhondge@sbx
                        receiver:
                          person:
                            name: Ganesh Vikram Borse
                            gender: M
                            image: image
                            cred: ganeshborse@hpr.ndhm
                        content:
                          content_id: 52216af0-42e1-11ed-a4b6-873d4ad3e26c
                          content_value: '{"type":"CANDIDATE","data":{"to":"ganeshborse@hpr.ndhm","from":"","candidate":{"sdpMLineIndex":0,"sdpMid":"0","candidate":"candidate:1355446498
                            1 udp 25108223 216.39.253.10 40045 typ relay raddr 103.177.129.21 rport
                            56294 generation 0 ufrag rlf3 network-id 1 network-cost 10"},"session_id":"ganeshborse@hpr.ndhm-akshaydhondge@sbx"}}'
                          content_type: video_call_signalling
                        time:
                          timestamp: '2022-10-03T11:35:03'

  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message   
                  
                  
  /on_cancel:
    post:
      tags:
        - EUA - Consumer Platform
      description: Receives the cancellation request from other party. 
      requestBody:
        description: Describes the contents of the message
        content:
          application/json:
            schema:
              type: object
              properties:
                context:
                  $ref: '#/components/schemas/Context'
                message:
                  type: object
                  properties:
                    order:
                      $ref: '#/components/schemas/Order'
                  required:
                    - order
                error:
                  $ref: '#/components/schemas/Error'
              required:
                - context
            examples:
              On_cancel for patient cancelling appointment:
                value:
                  context:
                    domain: 'nic2004:85111'
                    country: IND
                    city: 'std:080'
                    action: on_cancel
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: 'http://uhieuasandbox.abdm.gov.in/api/v1/euaService'
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: 'http://hspasbx.abdm.gov.in/api/v1'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    order:
                      id: 8441-696786-1042
                      state: CANCELLED
                      fulfillment:
                        tags:
                          '@abdm/gov.in/cancelledby': patient


                        
              On_cancel for doctor cancelling appointment:
                value:
                  context:
                    domain: 'nic2004:85111'
                    country: IND
                    city: 'std:080'
                    action: on_cancel
                    core_version: 0.7.1
                    consumer_id: eua-nha
                    consumer_uri: 'http://uhieuasandbox.abdm.gov.in/api/v1/euaService'
                    message_id: e9a19230-f951-11ec-b135-53aea776f66b
                    timestamp: '2022-07-05T15:24:35'
                    provider_id: hspa-nha
                    provider_uri: 'http://hspasbx.abdm.gov.in/api/v1'
                    transaction_id: e9a19230-f951-11ec-b135-53aea776f66b
                  message:
                    order:
                      id: 8441-696786-1042
                      state: CANCELLED
                      fulfillment:
                        tags:
                          '@abdm/gov.in/cancelledby': doctor

  
      responses:
        '200':
          description: Acknowledgement of message received
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      ack:
                        $ref: '#/components/schemas/Ack'
                    required:
                      - ack
                  error:
                    $ref: '#/components/schemas/Error'
                required:
                  - message
                    
components:
  schemas:
    Ack:
      description: Describes the ACK response
      type: object
      properties:
        status:
          type: string
          description: 'Describe the status of the ACK response. If schema validation passes, status is ACK else it is NACK'
          enum:
            - ACK
            - NACK
      required:
        - status
    Address:
      description: Describes an address
      type: object
      properties:
        door:
          type: string
          description: Door / Shop number of the address
        name:
          type: string
          description: 'Name of address if applicable. Example, shop name'
        building:
          type: string
          description: Name of the building or block
        street:
          type: string
          description: Street name or number
        locality:
          type: string
          description: 'Name of the locality, apartments'
        ward:
          type: string
          description: Name or number of the ward if applicable
        city:
          type: string
          description: City name
        state:
          type: string
          description: State name
        country:
          type: string
          description: Country name
        area_code:
          type: string
          description: 'Area code. This can be Pincode, ZIP code or any equivalent'
    Agent:
      description: Describes an order executor
      allOf:
        - $ref: '#/components/schemas/Person'
        - $ref: '#/components/schemas/Contact'
        - type: object
    Billing:
      description: Describes a billing event
      type: object
      properties:
        name:
          description: Personal details of the customer needed for billing.
          type: string
        organization:
          $ref: '#/components/schemas/Organization'
        address:
          $ref: '#/components/schemas/Address'
        email:
          type: string
          format: email
        phone:
          type: string
        time:
          $ref: '#/components/schemas/Time'
        tax_number:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - name
        - phone
    Catalog:
      description: Describes a DHP-Provider catalog
      type: object
      properties:
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/Category'
        fulfillments:
          type: array
          items:
            $ref: '#/components/schemas/Fulfillment'
        payments:
          type: array
          items:
            $ref: '#/components/schemas/Payment'
        providers:
          type: array
          items:
            $ref: '#/components/schemas/Provider'
        exp:
          type: string
          description: Time after which catalog has to be refreshed
          format: date-time
    Category:
      description: Describes a category
      type: object
      properties:
        id:
          type: string
          description: Unique id of the category
        parent_category_id:
          $ref: '#/components/schemas/Category/properties/id'
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        time:
          $ref: '#/components/schemas/Time'
        tags:
          $ref: '#/components/schemas/Tags'
    City:
      description: Describes a city
      type: object
      properties:
        name:
          type: string
          description: Name of the city
        code:
          type: string
          description: City code
    Contact:
      type: object
      properties:
        phone:
          type: string
        email:
          type: string
        tags:
          $ref: '#/components/schemas/Tags'
    Context:
      description: Describes a DHP message context
      type: object
      properties:
        domain:
          $ref: '#/components/schemas/Domain'
        country:
          $ref: '#/components/schemas/Country/properties/code'
        city:
          $ref: '#/components/schemas/City/properties/code'
        action:
          type: string
          description: Defines the DHP API call. Any actions other than the enumerated actions are not supported by DHP Protocol
          enum:
            - search
            - select
            - init
            - confirm
            - status
            - on_search
            - on_select
            - on_init
            - on_confirm
            - on_status
        core_version:
          type: string
          description: Version of DHP core API specification being used
        consumer_id:
          type: string
          format: uri
          description: Unique id of the Consumer. By default it is the fully qualified domain name of the Consumer
        consumer_uri:
          type: string
          format: uri
          description: URI of the Consumer for accepting callbacks. Must have the same domain name as the consumer_id
        provider_id:
          type: string
          format: uri
          description: Unique id of the Provider. By default it is the fully qualified domain name of the Provider
        provider_uri:
          type: string
          format: uri
          description: URI of the Provider. Must have the same domain name as the provider_id
        transaction_id:
          type: string
          description: This is a unique value which persists across all API calls from search through confirm
        message_id:
          type: string
          description: This is a unique value which persists during a request / callback cycle
        timestamp:
          type: string
          format: date-time
          description: Time of request generation in RFC3339 format
        key:
          type: string
          description: The encryption public key of the sender
        ttl:
          type: string
          description: The duration in ISO8601 format after timestamp for which this message holds valid
      required:
        - domain
        - action
        - country
        - city
        - core_version
        - transaction_id
        - message_id
        - consumer_id
        - consumer_uri
        - timestamp
    Country:
      description: Describes a country.
      type: object
      properties:
        name:
          type: string
          description: Name of the country
        code:
          type: string
          description: Country code as per ISO 3166-1 and ISO 3166-2 format
    DecimalValue:
      description: Describes a decimal value
      type: string
      pattern: '[+-]?([0-9]*[.])?[0-9]+'

    Descriptor:
      description: Describes the description of a real-world object.
      type: object
      properties:
        name:
          type: string
        code:
          type: string
        symbol:
          type: string
        short_desc:
          type: string
        long_desc:
          type: string
        images:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        audio:
          type: string
          format: uri
        3d_render:
          type: string
          format: uri

    Domain:
      description: Describes the domain of an object
      type: string

    Duration:
      description: Describes duration as per ISO8601 format
      type: string

    Error:
      description: Describes an error object
      type: object
      properties:
        type:
          type: string
        code:
          type: string
          description: 'DHP specific error code. For full list of error codes, refer to error_codes.md in the root folder of this repo'
        path:
          type: string
          description: Path to json schema generating the error. Used only during json schema validation errors
        message:
          type: string
          description: Human readable message describing the error
      required:
        - type
        - code

    Fulfillment:
      description: Describes how a single product/service will be rendered/fulfilled to the end customer
      type: object
      properties:
        id:
          type: string
          description: Unique reference ID to the fulfillment of an order
        type:
          type: string
          description: This describes the type of fulfillment
        provider_id:
          $ref: '#/components/schemas/Provider/properties/id'
        state:
          $ref: '#/components/schemas/State'
        tracking:
          type: boolean
          description: Indicates whether the fulfillment allows tracking
          default: false
        customer:
          type: object
          properties:
            person:
              $ref: '#/components/schemas/Person'
            contact:
              $ref: '#/components/schemas/Contact'
        agent:
          $ref: '#/components/schemas/Agent'
        person:
          $ref: '#/components/schemas/Person'
        contact:
          $ref: '#/components/schemas/Contact'
        start:
          description: Details on the start of fulfillment
          type: object
          properties:
            time:
              $ref: '#/components/schemas/Time'
            instructions:
              $ref: '#/components/schemas/Descriptor'
            contact:
              $ref: '#/components/schemas/Contact'
            person:
              $ref: '#/components/schemas/Person'
        end:
          description: Details on the end of fulfillment
          type: object
          properties:
            time:
              $ref: '#/components/schemas/Time'
            instructions:
              $ref: '#/components/schemas/Descriptor'
            contact:
              $ref: '#/components/schemas/Contact'
            person:
              $ref: '#/components/schemas/Person'
        tags:
          $ref: '#/components/schemas/Tags'
    
    Image:
      description: 'Image of an object. <br/><br/> A url based image will look like <br/><br/>```uri:http://path/to/image``` <br/><br/>'
      type: string
    
    Intent:
      description: Intent of a user. Used for searching for services
      type: object
      properties:
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        provider:
          $ref: '#/components/schemas/Provider'
        fulfillment:
          $ref: '#/components/schemas/Fulfillment'
        payment:
          $ref: '#/components/schemas/Payment'
        category:
          $ref: '#/components/schemas/Category'
        item:
          $ref: '#/components/schemas/Item'
        tags:
          $ref: '#/components/schemas/Tags'
            
    ItemQuantity:
      description: Describes count or amount of an item
      type: object
      properties:
        allocated:
          type: object
          properties:
            count:
              type: integer
              minimum: 0
            measure:
              $ref: '#/components/schemas/Scalar'
        available:
          type: object
          properties:
            count:
              type: integer
              minimum: 0
            measure:
              $ref: '#/components/schemas/Scalar'
        maximum:
          type: object
          properties:
            count:
              type: integer
              minimum: 1
            measure:
              $ref: '#/components/schemas/Scalar'
        minimum:
          type: object
          properties:
            count:
              type: integer
              minimum: 0
            measure:
              $ref: '#/components/schemas/Scalar'
        selected:
          type: object
          properties:
            count:
              type: integer
              minimum: 0
            measure:
              $ref: '#/components/schemas/Scalar'
    Item:
      description: Describes an item. Allows for domain extension.
      type: object
      properties:
        id:
          description: This is the most unique identifier of a service item. An example of an Item ID could be the SKU of a product.
          type: string
          format: '#/components/schemas/Item/properties/id'
        parent_item_id:
          $ref: '#/components/schemas/Item/properties/id'
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        price:
          $ref: '#/components/schemas/Price'
        category_id:
          $ref: '#/components/schemas/Category/properties/id'
        fulfillment_id:
          $ref: '#/components/schemas/Fulfillment/properties/id'
        time:
          $ref: '#/components/schemas/Time'
        matched:
          type: boolean
        related:
          type: boolean
        recommended:
          type: boolean
        tags:
          $ref: '#/components/schemas/Tags'
    Language:
      description: indicates language code. DHP supports country codes as per ISO 639.2 standard
      type: object
      properties:
        code:
          type: string
    MessageAck:
      title: Message
      type: object
      properties:
        ack:
          "$ref": "#/components/schemas/Ack"
    Name:
      type: string
      description: 'Describes the name of a person in format: ./{given_name}/{honorific_prefix}/{first_name}/{middle_name}/{last_name}/{honorific_suffix}'
      pattern: '^\./[^/]+/[^/]*/[^/]*/[^/]*/[^/]*/[^/]*$'

    Order:
      description: Describes the details of an order
      type: object
      properties:
        id:
          type: string
          description: Hash of order object without id
        state:
          type: string
        provider:
          type: object
          properties:
            id:
              $ref: '#/components/schemas/Provider/properties/id'
        items:
          type: array
          items:
            type: object
            properties:
              id:
                $ref: '#/components/schemas/Item/properties/id'
              quantity:
                $ref: '#/components/schemas/ItemQuantity/properties/selected'
            required:
              - id
        billing:
          $ref: '#/components/schemas/Billing'
        fulfillment:
          $ref: '#/components/schemas/Fulfillment'
        quote:
          $ref: '#/components/schemas/Quotation'
        payment:
          $ref: '#/components/schemas/Payment'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Organization:
      description: Describes an organization
      type: object
      properties:
        name:
          type: string
        cred:
          type: string

    Page:
      description: Describes a page in a search result
      type: object
      properties:
        id:
          type: string
        next_id:
          type: string

    Payment:
      description: Describes a payment
      type: object
      properties:
        uri:
          type: string
          description: 'A payment target uri to be called by the DHP-Consumer. Supported formats are <br></br>a) https and, <br></br>b) payto - Refer to RFC8905'
          format: uri
        tl_method:
          type: string
          enum:
            - https
            - payto
        params:
          type: object
          properties:
            transaction_id:
              type: string
              description: This value will be placed in the the $transaction_id url param in case of http/get and in the requestBody http/post requests
            transaction_status:
              type: string
            amount:
              $ref: '#/components/schemas/Price/properties/value'
            currency:
              $ref: '#/components/schemas/Price/properties/currency'
          additionalProperties:
            type: string
          required:
            - currency
        type:
          type: string
          description: Stage at which the payment is expected
          enum:
            - ON-ORDER
            - PRE-FULFILLMENT
            - ON-FULFILLMENT
            - POST-FULFILLMENT
        status:
          type: string
          enum:
            - PAID
            - NOT-PAID
        time:
          $ref: '#/components/schemas/Time'

    Person:
      description: Describes a person.
      type: object
      properties:
        id:
          type: string
        name:
          $ref: '#/components/schemas/Name'
        image:
          $ref: '#/components/schemas/Image'
        dob:
          type: string
          format: date
        gender:
          type: string
          description: 'Gender of something, typically a Person, but possibly also fictional characters, animals, etc. While Male and Female may be used, text strings are also acceptable for people who do not identify as a binary gender'
        cred:
          type: string
        tags:
          $ref: '#/components/schemas/Tags'
      required:
        - name

    Policy:
      description: Describes a policy. Allows for domain extension.
      type: object
      properties:
        id:
          type: string
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        parent_policy_id:
          $ref: '#/components/schemas/Policy/properties/id'
        time:
          $ref: '#/components/schemas/Time'

    Price:
      description: Describes the price of an item. Allows for domain extension.
      type: object
      properties:
        currency:
          type: string
        value:
          $ref: '#/components/schemas/DecimalValue'
        estimated_value:
          $ref: '#/components/schemas/DecimalValue'
        computed_value:
          $ref: '#/components/schemas/DecimalValue'
        listed_value:
          $ref: '#/components/schemas/DecimalValue'
        offered_value:
          $ref: '#/components/schemas/DecimalValue'
        minimum_value:
          $ref: '#/components/schemas/DecimalValue'
        maximum_value:
          $ref: '#/components/schemas/DecimalValue'
          
    Provider:
      description: 'Describes a service provider. This can be a restaurant, a hospital, a Store etc'
      type: object
      properties:
        id:
          type: string
          description: 'Id of the provider'
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        category_id:
          type: string
          description: 'Category Id of the provider'
        time:
          $ref: '#/components/schemas/Time'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/Category'
        fulfillments:
          type: array
          items:
            $ref: '#/components/schemas/Fulfillment'
        payments:
          type: array
          items:
            $ref: '#/components/schemas/Payment'
        items:
          type: array
          items:
            $ref: '#/components/schemas/Item'
        locations:
          type: array
          items:
            $ref: '#/components/schemas/Location'
        exp:
          type: string
          description: Time after which catalog has to be refreshed
          format: date-time
        tags:
          $ref: '#/components/schemas/Tags'

    Quotation:
      description: Describes a quote
      type: object
      properties:
        price:
          $ref: '#/components/schemas/Price'
        breakup:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              price:
                $ref: '#/components/schemas/Price'
        ttl:
          $ref: '#/components/schemas/Duration'
    Response:
      title: Response
      type: object
      properties:
        error:
          "$ref": "#/components/schemas/Error"
        message:
          "$ref": "#/components/schemas/MessageAck"
    Scalar:
      description: An object representing a scalar quantity.
      type: object
      properties:
        type:
          type: string
          enum:
            - CONSTANT
            - VARIABLE
        value:
          type: number
        estimated_value:
          type: number
        computed_value:
          type: number
        range:
          type: object
          properties:
            min:
              type: number
            max:
              type: number
        unit:
          type: string
      required:
        - value
        - unit

    Schedule:
      description: Describes a schedule
      type: object
      properties:
        frequency:
          $ref: '#/components/schemas/Duration'
        holidays:
          type: array
          items:
            type: string
            format: date-time
        times:
          type: array
          items:
            type: string
            format: date-time
    Location: 
      type: object
      properties: 
        id: 
          type: string
        descriptor: 
          type: object
          properties: 
            name: 
              type: string
        city: 
          type: object
          properties: 
            name: 
              type: string
            code: 
              type: string
        country: 
          type: object
          properties: 
            name: 
              type: string
            code: 
              type: string
        gps: 
          type: string
        address: 
          type: string












    State:
      description: Describes a state
      type: object
      properties:
        descriptor:
          $ref: '#/components/schemas/Descriptor'
        updated_at:
          type: string
          format: date-time
        updated_by:
          type: string
          description: ID of entity which changed the state

    Subscriber:
      type: object
      description: 'Any entity which wants to authenticate itself on a network. This can be a DHP-Consumer, DHP-Provider, DG.'
      properties:
        subscriber_id:
          type: string
          description: Registered domain name of the subscriber. Must have a valid SSL certificate issued by a Certificate Authority of the operating region
        type:
          type: string
          enum:
            - consumer
            - provider
            - gateway
        cb_url:
          type: string
          description: Callback URL of the subscriber. The Registry will call this URL's on_subscribe API to validate the subscriber\'s credentials
        domain:
          $ref: '#/components/schemas/Domain'
        city:
          $ref: '#/components/schemas/City/properties/code'
        country:
          $ref: '#/components/schemas/Country/properties/code'
        signing_public_key:
          type: string
          description: 'Signing Public key of the subscriber. <br/><br/>Any subscriber platform (dhp_consumer, dhp_provider, dg) who wants to transact on the network must digitally sign the ```requestBody``` using the corresponding private key of this public key and send it in the transport layer header. In case of ```HTTP``` it is the ```Authorization``` header. <br><br/>The ```Authorization``` will be used to validate the signature of a dhp_consumer or dhp_provider.<br/><br/>Furthermore, if an API call is being proxied or multicast by a DHP Gateway, the BG must use it\''s signing key to digitally sign the ```requestBody``` using the corresponding private key of this public key and send it in the ```Proxy-Authorization``` header.'
        encryption_public_key:
          type: string
          description: Encryption public key of the dhp_consumer subscriber. Any dhp_provider must encrypt the ```requestBody.message``` value of the ```on_search``` API using this public key.
        status:
          type: string
          enum:
            - INITIATED
            - UNDER_SUBSCRIPTION
            - SUBSCRIBED
            - INVALID_SSL
            - UNSUBSCRIBED
        created:
          type: string
          description: Timestamp when a subscriber was added to the registry with status = INITIATED
          format: date-time
        updated:
          type: string
          format: date-time
        expires:
          type: string
          description: Expiry timestamp in UTC derived from the ```lease_time``` of the subscriber
          format: date-time

    Tags:
      description: Describes a tag. This is a simple key-value store which is used to contain read-only metadata
      additionalProperties:
        type: string

    Time:
      description: Describes time in its various forms. It can be a single point in time; duration; or a structured timetable of operations<br>
         UHI currently follows ISO 8601 without timezone format (2022-07-15T00:00:00)
      type: object
      properties:
        label:
          type: string
        timestamp:
          type: string
          format: date-time
        duration:
          $ref: '#/components/schemas/Duration'
        range:
          type: object
          properties:
            start:
              type: string
              format: date-time
            end:
              type: string
              format: date-time
        days:
          type: string
          description: comma separated values representing days of the week
        schedule:
          $ref: '#/components/schemas/Schedule'
        